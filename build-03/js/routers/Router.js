define(["jquery","underscore"],function(a,b){var c={},d=Backbone.Router.extend({routes:{"":"default",":page":"generic"},initialize:function(){c=b.last(arguments),a(".back").live("click",function(a){return window.history.back(),!1}),this.firstPage=!0},"default":function(){for(var a in c.Views){this.changePage(new c.Views[a]);return}},generic:function(a){for(var b in c.Views)if(b.toLowerCase()===a.toLowerCase()){console.log("routing #%s",a),this.changePage(new c.Views[b]);return}console.log("no route for #%s",a)},changePage:function(b){a(b.el).attr("data-role","page"),b.render(),a("body").append(a(b.el));var c=b.transition?b.transition:a.mobile.defaultPageTransition;this.firstPage&&(c="none",this.firstPage=!1),a.mobile.changePage(a(b.el),{changeHash:!1,transition:c})}});return d})